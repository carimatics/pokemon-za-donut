(function(){"use strict";function k(f,t){return f.sweet>=t.sweet&&f.spicy>=t.spicy&&f.sour>=t.sour&&f.bitter>=t.bitter&&f.fresh>=t.fresh}function x(f,t,e,p,v){if(e===0)return k(f,t);const r={...f},s={sweet:0,spicy:0,sour:0,bitter:0,fresh:0};for(let a=v;a<p.length;a++){const n=p[a];if(n.count>0){const i=n.berry.flavors;s.sweet=Math.max(s.sweet,i.sweet),s.spicy=Math.max(s.spicy,i.spicy),s.sour=Math.max(s.sour,i.sour),s.bitter=Math.max(s.bitter,i.bitter),s.fresh=Math.max(s.fresh,i.fresh)}}return r.sweet+=s.sweet*e,r.spicy+=s.spicy*e,r.sour+=s.sour*e,r.bitter+=s.bitter*e,r.fresh+=s.fresh*e,r.sweet>=t.sweet&&r.spicy>=t.spicy&&r.sour>=t.sour&&r.bitter>=t.bitter&&r.fresh>=t.fresh}function C(f){const{required:t,stocks:e,slots:p,maxSolutions:v,firstBerryIndex:r,firstBerryCount:s}=f,a=[];let n=!1,i=0;function M(c,y,w,b){if(i++,a.length>=v){n=!0;return}if(k(b,t.flavors)){const o=[];for(let l=0;l<e.length;l++)y[l]>0&&o.push({berry:e[l].berry,count:y[l]});a.push({donut:t,stocks:o});return}if(w===0||c>=e.length)return;const h=e[c],R=Math.min(h.count,w);for(let o=0;o<=R;o++){y[c]=o;const l={sweet:b.sweet+h.berry.flavors.sweet*o,spicy:b.spicy+h.berry.flavors.spicy*o,sour:b.sour+h.berry.flavors.sour*o,bitter:b.bitter+h.berry.flavors.bitter*o,fresh:b.fresh+h.berry.flavors.fresh*o};if(!x(l,t.flavors,w-o,e,c+1)){y[c]=0;continue}M(c+1,y,w-o,l),y[c]=0}}const m=new Array(e.length).fill(0);m[r]=s;const u=e[r],S={sweet:u.berry.flavors.sweet*s,spicy:u.berry.flavors.spicy*s,sour:u.berry.flavors.sour*s,bitter:u.berry.flavors.bitter*s,fresh:u.berry.flavors.fresh*s},P=p-s;return M(r+1,m,P,S),{recipes:a,limitReached:n,explored:i}}self.onmessage=f=>{const t=f.data,e=C(t);self.postMessage(e)}})();
