(function(){"use strict";const w={MAX_SOLUTIONS:1e4};function M(r,s,c){const l=[];let n=!1;function e(i,f,y,h){if(l.length>=w.MAX_SOLUTIONS){n=!0;return}if(p(h,r.flavors)){const o=[];for(let a=0;a<s.length;a++)f[a]>0&&o.push({berry:s[a].berry,count:f[a]});l.push({donut:r,stocks:o});return}if(y===0||i>=s.length)return;const u=s[i],v=Math.min(u.count,y);for(let o=0;o<=v;o++){f[i]=o;const a={sweet:h.sweet+u.berry.flavors.sweet*o,spicy:h.spicy+u.berry.flavors.spicy*o,sour:h.sour+u.berry.flavors.sour*o,bitter:h.bitter+u.berry.flavors.bitter*o,fresh:h.fresh+u.berry.flavors.fresh*o};if(!m(a,r.flavors,y-o,s,i+1)){f[i]=0;continue}e(i+1,f,y-o,a),f[i]=0}}const t=new Array(s.length).fill(0);return e(0,t,c,{sweet:0,spicy:0,sour:0,bitter:0,fresh:0}),{recipes:l,limitReached:n}}function p(r,s){return r.sweet>=s.sweet&&r.spicy>=s.spicy&&r.sour>=s.sour&&r.bitter>=s.bitter&&r.fresh>=s.fresh}function m(r,s,c,l,n){if(c===0)return p(r,s);const e={...r},t={sweet:0,spicy:0,sour:0,bitter:0,fresh:0};for(let b=n;b<l.length;b++){const i=l[b];if(i.count>0){const f=i.berry.flavors;t.sweet=Math.max(t.sweet,f.sweet),t.spicy=Math.max(t.spicy,f.spicy),t.sour=Math.max(t.sour,f.sour),t.bitter=Math.max(t.bitter,f.bitter),t.fresh=Math.max(t.fresh,f.fresh)}}return e.sweet+=t.sweet*c,e.spicy+=t.spicy*c,e.sour+=t.sour*c,e.bitter+=t.bitter*c,e.fresh+=t.fresh*c,e.sweet>=s.sweet&&e.spicy>=s.spicy&&e.sour>=s.sour&&e.bitter>=s.bitter&&e.fresh>=s.fresh}self.onmessage=r=>{const{requestId:s,donut:c,stocks:l,slots:n}=r.data;try{const e=M(c,l,n),t={requestId:s,success:!0,result:{recipes:e.recipes,limitReached:e.limitReached}};self.postMessage(t)}catch(e){const t={requestId:s,success:!1,error:e instanceof Error?e.message:"Unknown error occurred"};self.postMessage(t)}}})();
